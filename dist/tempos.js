!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("fs"),require("path")):"function"==typeof define&&define.amd?define(["fs","path"],t):e.Tempos=t(e.fs,e.path)}(this,function(e,t){"use strict";function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var r=function(e){var t={};return e.replace(/([$_\w]+)/g,function(e){t[e]=!0}),t},o=r("Boolean Number String Function Array Object RegExp Set Map process");for(var i in o)o["[object "+i+"]"]=i.toLowerCase();var a={check:function(e,t){var n=null==e?""+e:o[Object.prototype.toString.call(e)]||"object";return void 0!==t?t===n:n}},u={debug:!0,cache:!0,startTag:"{{",endTag:"}}",extname:".temp",filepath:null,isNode:function(){var e=!1;try{e=global&&a.check(global.process,"process")}catch(e){}return e}(),ignore:r("$__data__ $__filter__ $__out__ do if for let new try var case else with await break true false catch class const super throw while yield delete export import return switch default extends finally continue debugger function arguments instanceof typeof catch void this in try")},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){s(this,e),this._data=Object.create(null)}return f(e,[{key:"get",value:function(e){return u.cache?this._data[e]:null}},{key:"set",value:function(e,t){u.cache&&(this._data[e]=t)}},{key:"detail",value:function(e,t){var n=this,r=void 0;return(r=n.get(e))||n.set(e,r=t()),r}}]),e}(),p=n(function(n){var r=new l;n.exports=function(n,o){var i="";if(u.isNode){var a=e,c=t;n=c.resolve(c.dirname(u.filepath),n),c.extname(n)||(n+=u.extname),o&&(o.fnName=c.basename(n,u.extname)),i=r.detail(n,function(){return a.readFileSync(n,"utf8")})}else{var s=document.querySelector(n);s&&(i=s.value||s.innerHTML)}return i}}),d=n(function(e){var t=new l,n=new l,r=new l,o=new l,i=new l,a=new l,c=new l,d="$__data__",h="$__out__",v="$__filter__",m=/#def\.([$_a-zA-Z](?:\w+)?)/,g=/#use\.([$_a-zA-Z](?:\w+)?)/,y=/(include\s+)(?:\'|\")([^\'\"]+)(?:\'|\")(?:\s+)?([\w\W]+)?/,b=/(extend\s+)(?:\'|\")([^\'\"]+)(?:\'|\")(?:\s+)?([\w\W]+)?/,w=/[\w_$]/,x=/^[a-zA-Z_$]/,k=function e(t){return c.detail(t.template,function(){var n=void 0,r="",o="",i="var "+h+" = '',"+v+"=this";for(n in t.vars)i+=","+n+"="+d+"."+n;return i+=";\n",t.tokens.forEach(function(t){var n=t.def||t.use||t.include;(t.def||t.include||t.extend)&&(o+="var "+t.fnName+"=function("+d+") {\n"+e(t.compile)+"};\n"),t.use||t.include||t.extend?r+=h+" += "+t.fnName+".call("+v+", "+(t.params||d)+");\n":n||!1!==t.out?n||(r+=h+" += "+(t.out?S(t):"'"+t.source+"'")+";\n"):r+=t.source+"\n"}),r+="return "+h+";\n",i+o+r})},_=function(e){var t=e.template;return r.detail(t,function(){for(var n=0,r=void 0,o={token:[],vars:{}};-1!==(r=t.indexOf(u.startTag,n));)r>n&&o.token.push({source:T(t.substring(n,r))}),n=j(e,o.token,o.vars,r+u.endTag.length);return n<e.template.length&&o.token.push({source:T(t.substring(n))}),e.tokens=o.token,e.vars=o.vars,o})},T=function(e){return i.detail(e,function(){for(var t=void 0,n=void 0,r=void 0,o="",i=-1,a=e.length;i++<a;)switch(t=n,n=e.charCodeAt(i),r=e.charAt(i),n){case 39:case 34:o+=(92!==t?"\\":"")+r;break;case 13:o+="\\r";break;case 10:o+="\\n";break;default:o+=r}return o})},j=function(e,t,r,o){var i=e.template,a=n.detail(i+o,function(){var e=void 0,n=void 0,a=void 0,c=0,s=0;a=i.indexOf(u.endTag,o);var f={out:!1,escape:!1};if(e=(n=i.substring(o,a).trim()).match(m))f.def=!0,f.fnName=e[1],c=e[0].length,a=i.indexOf("#"+u.endTag,o),s=1;else if(e=n.match(g))f.use=!0,f.fnName=e[1],c=e[0].length;else if(e=n.match(y))f.include=!0,f.path=e[2],f.params=e[3],c=e[1].length;else if(e=n.match(b))f.extend=!0,f.out=!0,f.path=e[2],f.params=e[3],c=e[1].length;else switch(n.charCodeAt(0)){case 61:c=1,f.escape=!0,f.out=!0;break;case 45:c=1,f.out=!0}return n=i.substring(o+c+1,a),f.def?(f.source=n,f.compile=new $({template:n})):f.use?f.params=n:f.include||f.extend?(f.source=p(f.path,f),f.compile=new $({template:f.source})):(e=A(n,r),f.source=e.source,f.filter=e.filter),(f.use||f.include)&&f.params&&A(f.params,r),t.push(f),{end:a,ediff:s}});return a.end+u.endTag.length+a.ediff},C=function(e){var t=e.trim();return o.detail(t,function(){for(var e=t.length,n=void 0,r=void 0,o=void 0,i=void 0,a=-1,u="",c="",s="",f={},l={},p=!1,d=!1,h=!1;a++<e;)o=n,n=t.charCodeAt(a),r=t.charAt(a),39!==n&&34!==n||92===o?d||124!==n||124===o||124===t.charCodeAt(a+1)||(h=p=!0):d=!d,p&&(!d&&32===n||a===e)?(124===(s=s.trim()).charCodeAt(0)?h=!0:h?(l[i=s]=[],h=!1):l[i].push(s),s=""):p&&(s+=r),w.test(r)?d||(u+=r):(u=u.trim(),x.test(u)&&!l[u]&&(f[u]=!0),u=""),p||(c+=r);return{source:c.trim(),vars:f,filter:l}})},A=function(e,t){var n=C(e.trim());for(var r in n.vars)u.ignore[r]||(t[r]=!0);return n},S=function(e){return a.detail(JSON.stringify(e),function(){var t=e.escape?v+".escape("+e.source+")":e.source,n=void 0;for(var r in e.filter)if(!e.escape||"escape"!==r){var o=")";e.filter[r].length&&(o=","+e.filter[r].join(",")+")"),t=v+"."+r+"("+t+o,n=1}return n?t:"("+t+")"})},$=function(){function e(t){s(this,e),this.template=t.template,this.tokens=null,this.vars={},_(this)}return f(e,[{key:"build",value:function(){var e=this;return t.detail(e.template,function(){return new Function(d,k(e))})}}]),e}();e.exports=$}),h={print:function(e){u.debug&&console&&console.log&&console.log(e)},checkType:function(e,t,n){if(u.debug&&!a.check(t,n))throw new TypeError(e+" Parameter type must be "+n+".")}},v={escape:n(function(e){var t=new l,n=/[<>\"\'&]/g,r={};["&","<",">",'"',"'"].forEach(function(e){var t=e.charCodeAt(0);r[t]="&#"+t+";"});e.exports=function(e){return t.detail(e,function(){return n.test(e)?e.replace(n,function(e){return r[e.charCodeAt(0)]||e}):e})}}),upper:n(function(e){e.exports=function(e,t){h.checkType("Filter:upper()",e,"string");var n=void 0;switch(t){case!0:n=e.replace(/\b[a-z]\w*\b/g,function(e){return e.substr(0,1).toUpperCase()+e.substr(1)});break;default:n=e.toUpperCase()}return n||e}}),trim:n(function(e){e.exports=function(e){return h.checkType("Filter:trim()",e,"string"),String.prototype.trim.call(e)}}),lower:n(function(e){e.exports=function(e){return h.checkType("Filter:lower()",e,"string"),e.toLowerCase()}}),defaults:n(function(e){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return void 0===e||null===e?t:e}}),join:n(function(e){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return h.checkType("Filter:join()",e,"array"),e.join(t)}}),size:n(function(e){e.exports=function(e){var t=e&&e.length;if(!t&&"object"===(void 0===t?"undefined":c(t))){t=0;for(var n in e)t++}return t||0}}),replace:n(function(e){e.exports=function(e,t,n){return h.checkType("Filter:replace()",e,"string"),e.replace(t,n)}}),eq:n(function(e){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0,r=a.check(e,"object");if(!(a.check(e,"array")||r||a.check(e,"string")))return n;if("last"===t)if(r)for(var o in e)n=e[o];else n=e[e.length-1];else n=e[t];return n}}),truncate:n(function(e){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return h.checkType("Filter:truncate()",e,"string"),e.length>t?e.substr(0,t)+n:e}})},m=n(function(e){var t=new l;e.exports=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.check(e);return"object"===r?n=e:"string"===r&&(u.filepath=e,n.template=p(e)),u.filepath=u.filepath||n.filepath,n.template=n.template.trim(),t.detail(n.template,function(){return new d(n).build().bind(v)})}}),g=n(function(e){e.exports=function(e,t,n){return m(e,n)(t)}});return n(function(e){var t=function(e,t,n){return g(e,t,n)};t.render=g,t.compile=m,t.Config=u,t.Filter=v,t.Cache=l,e.exports=t})});
//# sourceMappingURL=tempos.js.map
